import { ApiRequestHandler, ApiService } from '../../api';
import { TelemetrySyncStat } from '..';
import { Observable } from 'rxjs';
import { KeyValueStore } from '../../key-value-store';
import { TelemetryConfig } from '../config/telemetry-config';
import { DeviceInfo } from '../../util/device';
import { DbService } from '../../db';
import { FrameworkService } from '../../framework';
export declare class TelemetrySyncHandler implements ApiRequestHandler<boolean, TelemetrySyncStat> {
    private dbService;
    private telemetryConfig;
    private deviceInfo;
    private frameworkService;
    private keyValueStore?;
    private apiService?;
    static readonly TELEMETRY_LOG_MIN_ALLOWED_OFFSET_KEY: string;
    private static readonly LAST_SYNCED_DEVICE_REGISTER_ATTEMPT_TIME_STAMP_KEY;
    private static readonly LAST_SYNCED_DEVICE_REGISTER_IS_SUCCESSFUL_KEY;
    private static readonly DEVICE_REGISTER_ENDPOINT;
    private static readonly TELEMETRY_ENDPOINT;
    private static readonly REGISTER_API_SUCCESS_TTL;
    private static readonly REGISTER_API_FAILURE_TTL;
    private readonly preprocessors;
    constructor(dbService: DbService, telemetryConfig: TelemetryConfig, deviceInfo: DeviceInfo, frameworkService: FrameworkService, keyValueStore?: KeyValueStore | undefined, apiService?: ApiService | undefined);
    handle(ignoreSyncThreshold: boolean): Observable<TelemetrySyncStat>;
    private registerDevice;
    processEventsBatch(): Observable<number>;
    private hasTelemetryThresholdCrossed;
    private fetchEvents;
    private processEvents;
    private persistProcessedEvents;
    private deleteEvents;
    private handleProcessedEventsBatch;
    private fetchProcessedEventsBatch;
    private syncProcessedEvent;
    private deleteProcessedEvent;
}
